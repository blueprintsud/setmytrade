<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="utf-8">
    <title>SetMyTrade - Professional Stop Loss & Take Profit Calculator</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="SetMyTrade - Professional trading calculator for Stop Loss, Take Profit and Risk/Reward calculations" name="description">
    <meta content="trading, stop loss, take profit, calculator, risk management, stocks" name="keywords">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Roboto:wght@400;500;700;900&family=Montserrat:wght@200;400;500;700&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Animate CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.js"></script>

    <style>
        /********** Template CSS **********/
        :root {
            --primary: #00D084;
            --secondary: #0D2735;
            --light: #F8F8F8;
            --dark: #0D2735;
        }

        body {
            font-family: 'Inter', sans-serif;
            font-weight: 400;
            color: #E0E0E0;
            background: #0D1F2D !important;
            background-attachment: fixed;
            min-height: 100vh;
        }
        
        /* Force dark theme everywhere */
        * {
            scrollbar-width: thin;
            scrollbar-color: var(--primary) #1A2F3D;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Roboto', sans-serif;
            font-weight: 700;
            color: #FFFFFF;
        }

        .btn {
            font-weight: 500;
            transition: .5s;
        }

        .btn-primary {
            color: #FFFFFF;
            background-color: var(--primary);
            border-color: var(--primary);
        }

        .btn-primary:hover {
            background-color: #00B871;
            border-color: #00B871;
        }

        .btn-square {
            width: 38px;
            height: 38px;
        }

        .btn-sm-square {
            width: 32px;
            height: 32px;
        }

        .btn-lg-square {
            width: 48px;
            height: 48px;
        }

        .btn-square,
        .btn-sm-square,
        .btn-lg-square {
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: normal;
        }

        .back-to-top {
            position: fixed;
            display: none;
            right: 30px;
            bottom: 30px;
            z-index: 99;
        }

        /*** Spinner ***/
        #spinner {
            opacity: 0;
            visibility: hidden;
            transition: opacity .5s ease-out, visibility 0s linear .5s;
            z-index: 99999;
            background: #0D1F2D !important;
        }

        #spinner.show {
            transition: opacity .5s ease-out, visibility 0s linear 0s;
            visibility: visible;
            opacity: 1;
        }

        /*** Topbar ***/
        .topbar {
            background: rgba(26, 47, 61, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .topbar .text-muted {
            color: #B0B0B0 !important;
        }

        .topbar .text-dark {
            color: #E0E0E0 !important;
        }

        .topbar .dropdown-toggle::after {
            border: none;
            content: "\f107";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            vertical-align: middle;
            margin-left: 8px;
        }

        /*** Navbar ***/
        .navbar {
            transition: .5s;
            background: rgba(26, 47, 61, 0.95);
            backdrop-filter: blur(10px);
        }

        .navbar.sticky-top {
            box-shadow: 0 .5rem 1rem rgba(0, 0, 0, 0.3);
        }

        .navbar .navbar-brand {
            height: 75px;
            display: flex;
            align-items: center;
        }

        .navbar .navbar-brand h1 {
            margin: 0;
            color: #FFFFFF;
        }

        .navbar .navbar-nav .nav-link {
            margin-right: 30px;
            padding: 25px 0;
            color: #E0E0E0;
            font-weight: 500;
            text-transform: uppercase;
            outline: none;
        }

        .navbar .navbar-nav .nav-link:hover,
        .navbar .navbar-nav .nav-link.active {
            color: var(--primary);
        }

        .navbar .dropdown-toggle::after {
            border: none;
            content: "\f107";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            vertical-align: middle;
            margin-left: 8px;
        }

        @media (max-width: 991.98px) {
            .navbar .navbar-nav .nav-link  {
                margin-right: 0;
                padding: 10px 0;
            }

            .navbar .navbar-nav {
                border-top: 1px solid #EEEEEE;
            }
        }

        @media (min-width: 992px) {
            .navbar .nav-item .dropdown-menu {
                display: block;
                border: none;
                margin-top: 0;
                top: 150%;
                opacity: 0;
                visibility: hidden;
                transition: .5s;
            }

            .navbar .nav-item:hover .dropdown-menu {
                top: 100%;
                visibility: visible;
                transition: .5s;
                opacity: 1;
            }
        }

        /*** Hero Header ***/
        .hero-header {
            background: linear-gradient(rgba(13, 39, 53, 0.95), rgba(13, 39, 53, 0.95)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080"><rect fill="%230D2735" width="1920" height="1080"/></svg>') center center no-repeat;
            background-size: cover;
            padding: 100px 0 50px 0;
        }

        .hero-header h1 {
            color: #FFFFFF;
            font-size: 48px;
            margin-bottom: 20px;
        }

        .hero-header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 18px;
        }

        /*** Section Title ***/
        .section-title {
            position: relative;
            display: inline-block;
            color: var(--primary);
        }

        .section-title::before {
            position: absolute;
            content: "";
            width: 45px;
            height: 2px;
            top: 50%;
            left: -55px;
            margin-top: -1px;
            background: var(--primary);
        }

        .section-title::after {
            position: absolute;
            content: "";
            width: 45px;
            height: 2px;
            top: 50%;
            right: -55px;
            margin-top: -1px;
            background: var(--primary);
        }

        .section-title.text-start::before,
        .section-title.text-end::after {
            display: none;
        }

        .text-muted {
            color: #B0B0B0 !important;
        }

        /*** Card Styles ***/
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            transition: .5s;
            background: rgba(26, 47, 61, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card:hover {
            box-shadow: 0 0 45px rgba(0, 208, 132, 0.3);
            transform: translateY(-5px);
        }

        /*** Stock Search Section ***/
        .stock-search-card {
            background: rgba(0, 208, 132, 0.05);
            border-left: 4px solid var(--primary);
        }

        .search-input {
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 12px 20px;
            font-size: 16px;
            transition: all 0.3s;
            background: rgba(13, 31, 45, 0.5);
            color: #FFFFFF;
        }

        .search-input::placeholder {
            color: #B0B0B0;
        }

        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.2rem rgba(0, 208, 132, 0.25);
            background: rgba(13, 31, 45, 0.7);
            color: #FFFFFF;
        }

        /*** Stock Result ***/
        .stock-result {
            display: none;
            background: rgba(0, 208, 132, 0.1);
            border: 2px solid var(--primary);
            border-radius: 10px;
            padding: 25px;
            margin-top: 20px;
            animation: fadeInUp 0.5s;
        }

        .stock-result.show {
            display: block;
        }

        .stock-ticker {
            font-size: 28px;
            font-weight: 700;
            color: #FFFFFF;
            font-family: 'Roboto', monospace;
        }

        .stock-price {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
        }

        .stock-change {
            font-size: 18px;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 6px;
        }

        .stock-change.positive {
            background: rgba(0, 208, 132, 0.2);
            color: var(--primary);
        }

        .stock-change.negative {
            background: rgba(255, 107, 107, 0.2);
            color: #FF6B6B;
        }

        /*** Chart ***/
        .chart-container {
            position: relative;
            height: 350px;
            background: rgba(13, 31, 45, 0.6);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .period-btn {
            padding: 8px 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(13, 31, 45, 0.5);
            color: #E0E0E0;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .period-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: #FFFFFF;
        }

        .period-btn:hover:not(.active) {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(0, 208, 132, 0.1);
        }

        /*** Risk Selector ***/
        .risk-option {
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(13, 31, 45, 0.5);
        }

        .risk-option:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0, 208, 132, 0.3);
            background: rgba(13, 31, 45, 0.7);
        }

        .risk-option.active {
            border-color: var(--primary);
            background: rgba(0, 208, 132, 0.15);
            box-shadow: 0 0 0 4px rgba(0, 208, 132, 0.2);
        }

        .risk-label {
            font-weight: 600;
            color: #E0E0E0;
            margin-bottom: 5px;
        }

        .risk-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        /*** Results ***/
        .results-card {
            display: none;
            background: linear-gradient(135deg, rgba(0, 208, 132, 0.05) 0%, rgba(13, 39, 53, 0.05) 100%);
            border-left: 4px solid var(--primary);
            padding: 30px;
            border-radius: 10px;
            margin-top: 30px;
        }

        .results-card.show {
            display: block;
            animation: fadeInUp 0.5s;
        }

        .result-item {
            background: rgba(13, 31, 45, 0.6);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .result-label {
            color: #B0B0B0;
            font-size: 14px;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .result-value {
            font-size: 24px;
            font-weight: 700;
            font-family: 'Roboto', monospace;
            color: #FFFFFF;
        }

        .result-value.positive {
            color: var(--primary);
        }

        .result-value.negative {
            color: #FF6B6B;
        }

        /*** Guide Section ***/
        .guide-card {
            background: rgba(26, 47, 61, 0.6);
            border-left: 4px solid var(--primary);
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .guide-step {
            background: rgba(13, 31, 45, 0.6);
            padding: 15px 20px;
            border-radius: 6px;
            margin-bottom: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #E0E0E0;
        }

        .guide-value {
            color: var(--primary);
            font-weight: 700;
            font-family: 'Roboto', monospace;
        }

        /*** Loading Spinner ***/
        .loading-spinner {
            text-align: center;
            padding: 40px;
        }

        .spinner-border-custom {
            width: 3rem;
            height: 3rem;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /*** Footer ***/
        .footer {
            background: var(--dark);
            color: rgba(255, 255, 255, 0.7);
        }

        .footer .btn.btn-link {
            display: block;
            margin-bottom: 5px;
            padding: 0;
            text-align: left;
            color: rgba(255, 255, 255, 0.7);
            font-weight: normal;
            text-decoration: none;
            transition: .3s;
        }

        .footer .btn.btn-link::before {
            position: relative;
            content: "\f105";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            color: rgba(255, 255, 255, 0.7);
            margin-right: 10px;
        }

        .footer .btn.btn-link:hover {
            color: var(--primary);
            letter-spacing: 1px;
            box-shadow: none;
        }

        .footer .btn.btn-link:hover::before {
            color: var(--primary);
        }

        .copyright {
            background: rgba(0, 0, 0, 0.2);
        }

        /* Bootstrap Nav Pills Dark Theme */
        .nav-pills .nav-link {
            background: rgba(13, 31, 45, 0.5);
            color: #E0E0E0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 0 5px;
        }

        .nav-pills .nav-link:hover {
            background: rgba(0, 208, 132, 0.1);
            color: var(--primary);
        }

        .nav-pills .nav-link.active {
            background: var(--primary);
            color: #FFFFFF;
        }

        /* Alert Dark Theme */
        .alert-warning {
            background: rgba(255, 193, 7, 0.15);
            border: 1px solid rgba(255, 193, 7, 0.3);
            color: #E0E0E0;
        }

        /* Form labels */
        .form-label {
            color: #E0E0E0;
        }

        /* Language Selector */
        .language-selector {
            display: inline-flex;
            gap: 8px;
            align-items: center;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 6px;
            padding: 8px 14px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            line-height: 1;
            backdrop-filter: blur(5px);
        }

        .lang-btn:hover {
            border-color: var(--primary);
            background: rgba(0, 208, 132, 0.25);
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(0, 208, 132, 0.4);
        }

        .lang-btn.active {
            border-color: var(--primary);
            background: rgba(0, 208, 132, 0.3);
            box-shadow: 0 0 20px rgba(0, 208, 132, 0.5);
        }

        /* Calendar Card Styles - PARALLAX FLIPPING CALENDAR */
        .calendar-container {
            width: 100%;
            max-width: 450px;
            height: 250px;
            position: relative;
            perspective: 1000px;
            -webkit-perspective: 1000px;
            margin: 0 auto;
        }

        .calendar-card {
            width: 100%;
            height: 100%;
            position: absolute;
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d;
            transition: transform 1s ease;
            cursor: pointer;
        }

        .calendar-card.flipped {
            transform: rotateY(-180deg);
        }

        .calendar-back, .calendar-front {
            border-radius: 6px;
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }

        .calendar-front {
            text-transform: uppercase;
            background-color: #232227;
        }

        .calendar-back {
            transform: rotateY(180deg);
            background-color: #232227;
        }

        .contentfront {
            width: 100%;
            height: 100%;
            float: left;
            transform: translateZ(60px);
            -webkit-transform: translateZ(60px);
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d;
            display: flex;
        }

        .contentback {
            width: 100%;
            height: 100%;
            float: left;
            transform: translateZ(60px);
            -webkit-transform: translateZ(60px);
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d;
        }

        .calendar-month {
            height: 100%;
            flex: 1;
            padding: 15px 20px;
            box-sizing: border-box;
        }

        .calendar-month table {
            width: 100%;
        }

        .orangeTr {
            color: #E76642;
        }

        .whiteTr {
            color: #ECECE7;
        }

        .whiteTr th:hover {
            color: #E76642;
            transition: .3s ease;
        }

        .calendar-month tr {
            height: 20px;
        }

        .calendar-month th {
            width: 14%;
            font-size: 10px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 400;
        }

        .calendar-date {
            height: 100%;
            width: 130px;
            background-color: #E76642;
            border-radius: 0 6px 6px 0;
            text-align: right;
            padding: 10px 20px;
            box-sizing: border-box;
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .calendar-date-content {
            height: 100%;
            transform: translateZ(60px) scale(.9);
            -webkit-transform: translateZ(60px) scale(.9);
        }

        #cal-date {
            font-size: 50px;
            color: #ECECE7;
            font-family: 'Montserrat', sans-serif;
            font-weight: 500;
            float: right;
            line-height: 1;
        }

        #cal-day {
            float: right;
            font-size: 14px;
            color: #232227;
            font-family: 'Montserrat', sans-serif;
            font-weight: 400;
            clear: both;
        }

        #cal-month {
            float: right;
            font-size: 10px;
            color: #232227;
            font-family: 'Montserrat', sans-serif;
            font-weight: 200;
        }

        .backcontainer {
            transform-style: preserve-3d;
            width: calc(100% - 60px);
            height: calc(100% - 40px);
            float: left;
            margin-left: 30px;
            margin-top: 20px;
            background-color: #E76642;
            border-radius: 6px;
            padding: 15px 20px;
            box-sizing: border-box;
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d;
            overflow-y: auto;
        }

        .sector-item-back {
            background: rgba(0, 0, 0, 0.2);
            padding: 8px 12px;
            border-radius: 4px;
            margin-bottom: 8px;
            font-size: 11px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sector-name-back {
            color: #ECECE7;
            font-weight: 500;
        }

        .sector-status-back {
            font-weight: 700;
            font-size: 10px;
        }

        .sector-status-back.strong {
            color: #00FF88;
        }

        .sector-status-back.weak {
            color: #FF6B6B;
        }

        .sector-status-back.neutral {
            color: #FFD700;
        }

        /* Hero Slider */
        .hero-slider {
            position: relative;
            min-height: 350px;
        }

        .hero-slide {
            position: absolute;
            width: 100%;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            pointer-events: none;
        }

        .hero-slide.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* News Items */
        .news-item {
            background: rgba(13, 31, 45, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            transition: all 0.3s;
        }

        .news-item:hover {
            background: rgba(0, 208, 132, 0.1);
            border-color: rgba(0, 208, 132, 0.3);
            transform: translateX(5px);
        }

        .news-title {
            color: #FFFFFF;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .news-source {
            color: #B0B0B0;
            font-size: 11px;
        }

        .news-link {
            color: var(--primary);
            text-decoration: none;
            font-size: 12px;
        }

        .news-link:hover {
            text-decoration: underline;
        }

        /* Feedback Modal */
        .feedback-modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .feedback-modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .feedback-content {
            background: rgba(26, 47, 61, 0.95);
            border: 2px solid var(--primary);
            border-radius: 10px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            position: relative;
        }

        .feedback-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: #E0E0E0;
            font-size: 24px;
            cursor: pointer;
        }

        .feedback-close:hover {
            color: var(--primary);
        }

        /* Top Gainers Section */
        .gainers-card {
            background: rgba(26, 47, 61, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .gainer-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: rgba(13, 31, 45, 0.6);
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
        }

        .gainer-item:hover {
            background: rgba(0, 208, 132, 0.1);
            border-color: rgba(0, 208, 132, 0.3);
            transform: translateX(5px);
        }

        .gainer-info {
            flex: 1;
        }

        .gainer-ticker {
            font-weight: 700;
            color: #FFFFFF;
            font-size: 14px;
            font-family: 'Space Mono', monospace;
        }

        .gainer-name {
            font-size: 11px;
            color: #B0B0B0;
            margin-top: 2px;
        }

        .gainer-change {
            font-weight: 700;
            color: var(--primary);
            font-size: 16px;
            margin-right: 10px;
        }

        .gainer-price {
            font-size: 13px;
            color: #E0E0E0;
            font-family: 'Space Mono', monospace;
        }

        /* Scrollable Hero Header */
        .hero-slider {
            position: relative;
            overflow: hidden;
            height: 100%;
        }

        .hero-slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            pointer-events: none;
        }

        .hero-slide.active {
            opacity: 1;
            pointer-events: auto;
        }
    </style>
</head>

<body>
    <!-- Spinner Start -->
    <div id="spinner" class="show position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center" style="background: #0D1F2D;">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Laddar...</span>
        </div>
    </div>
    <!-- Spinner End -->

    <!-- Topbar Start -->
    <div class="container-fluid topbar px-5 d-none d-lg-block" style="background: rgba(26, 47, 61, 0.8); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
        <div class="row gx-0 align-items-center">
            <div class="col-lg-8 text-center text-lg-start mb-2 mb-lg-0">
                <div class="d-flex flex-wrap">
                    <span class="small me-4" style="color: #B0B0B0;"><i class="fas fa-chart-line text-primary me-2"></i>Professionell Trading Kalkylator</span>
                    <span class="small me-0" style="color: #B0B0B0;"><i class="fas fa-shield-alt text-primary me-2"></i>100% Gratis Verktyg</span>
                </div>
            </div>
            <div class="col-lg-4 text-center text-lg-end">
                <div class="d-inline-flex align-items-center" style="height: 45px;">
                    <small class="me-3" style="color: #E0E0E0;"><i class="fa fa-calculator text-primary me-2"></i><span data-lang="calcSlTp">Ber√§kna SL/TP</span></small>
                    <div class="language-selector">
                        <button class="lang-btn active" onclick="changeLanguage('sv')" title="Svenska">
                            üá∏üá™
                        </button>
                        <button class="lang-btn" onclick="changeLanguage('en')" title="English">
                            üá¨üáß
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar End -->

    <!-- Navbar Start -->
    <div class="container-fluid position-relative p-0">
        <nav class="navbar navbar-expand-lg navbar-dark px-4 px-lg-5 py-3 py-lg-0" style="background: rgba(26, 47, 61, 0.95); backdrop-filter: blur(10px);">
            <a href="index.html" class="navbar-brand p-0">
                <h1 class="text-primary"><i class="fas fa-chart-line me-3"></i>SetMyTrade</h1>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="fa fa-bars"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ms-auto py-0">
                    <a href="#home" class="nav-item nav-link active">Hem</a>
                    <a href="#calculator" class="nav-item nav-link">Kalkylator</a>
                    <a href="#guides" class="nav-item nav-link">Guider</a>
                </div>
                <a href="#calculator" class="btn btn-primary rounded-pill py-2 px-4 my-3 my-lg-0 flex-shrink-0">Kom Ig√•ng</a>
            </div>
        </nav>

        <!-- Hero Header Start - SCROLLABLE -->
        <div class="hero-header">
            <div class="container">
                <div class="hero-slider">
                    <!-- Slide 1: Welcome -->
                    <div class="hero-slide active" id="heroSlide1">
                        <div class="row g-5 align-items-center">
                            <div class="col-lg-6 text-center text-lg-start">
                                <h4 class="text-primary text-uppercase fw-bold mb-4" data-lang="welcomeTitle">V√§lkommen till SetMyTrade</h4>
                                <h1 class="display-4 text-white mb-4" data-lang="heroHeadline">Maximera Din Avkastning med Smart Riskhantering</h1>
                                <p class="text-white-50 mb-4 pb-3" data-lang="heroDescription">Ber√§kna exakta Stop Loss och Take Profit niv√•er f√∂r dina aktieaff√§rer p√• Avanza. Professionellt verktyg f√∂r seri√∂sa investerare.</p>
                                <div class="d-flex align-items-center justify-content-center justify-content-lg-start">
                                    <a href="#calculator" class="btn btn-primary rounded-pill py-3 px-5 me-3" data-lang="btnStartCalc">B√∂rja Ber√§kna</a>
                                    <a href="#guides" class="btn btn-outline-light rounded-pill py-3 px-5" data-lang="btnReadGuides">L√§s Guider</a>
                                </div>
                            </div>
                            <div class="col-lg-6 text-center text-lg-end">
                                <i class="fas fa-calculator fa-10x text-primary opacity-50"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 2: Sector Calendar -->
                    <div class="hero-slide" id="heroSlide2">
                        <div class="row g-5 align-items-center justify-content-center">
                            <div class="col-lg-10 text-center">
                                <h2 class="text-white mb-2" style="font-weight: 700; font-size: 32px;"><span data-lang="sectorPerformance">Marknads√∂versikt</span></h2>
                                <p class="text-white-50 mb-4" style="font-size: 16px;"><span data-lang="sectorSubtitle">Dagens starkaste sektorer</span></p>
                                <div class="row g-3 mt-4">
                                    <div class="col-md-4">
                                        <div class="card p-3" style="background: rgba(0, 208, 132, 0.15); border: 2px solid var(--primary);">
                                            <h5 class="text-primary mb-2" data-lang="technology">Teknologi</h5>
                                            <div class="text-white mb-2" style="font-size: 24px; font-weight: 700;">+3.5%</div>
                                            <div class="text-muted" style="font-size: 12px;">Top: NVDA, AAPL, MSFT</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card p-3" style="background: rgba(0, 208, 132, 0.15); border: 2px solid var(--primary);">
                                            <h5 class="text-primary mb-2" data-lang="energy">Energi</h5>
                                            <div class="text-white mb-2" style="font-size: 24px; font-weight: 700;">+2.8%</div>
                                            <div class="text-muted" style="font-size: 12px;">Top: XOM, CVX, SLB</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card p-3" style="background: rgba(255, 193, 7, 0.15); border: 2px solid #FFC107;">
                                            <h5 class="mb-2" style="color: #FFC107;" data-lang="healthcare">H√§lsov√•rd</h5>
                                            <div class="text-white mb-2" style="font-size: 24px; font-weight: 700;">+0.5%</div>
                                            <div class="text-muted" style="font-size: 12px;">Top: JNJ, UNH, PFE</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 3: News -->
                    <div class="hero-slide" id="heroSlide3">
                        <div class="row g-5 justify-content-center">
                            <div class="col-lg-10">
                                <h2 class="text-white text-center mb-2" style="font-weight: 700; font-size: 32px;"><span data-lang="marketNews">Marknadsnyheter</span></h2>
                                <p class="text-white-50 text-center mb-4" style="font-size: 16px;"><span data-lang="newsSubtitle">Senaste uppdateringarna</span></p>
                                <div class="row g-3">
                                    <div class="col-md-6" id="newsSlide1">
                                        <div class="news-item">
                                            <div class="news-title">Tech stocks surge as AI investments accelerate</div>
                                            <div class="news-source">Yahoo Finance ‚Ä¢ 2h ago</div>
                                            <a href="https://finance.yahoo.com" target="_blank" class="news-link" data-lang="readMore">L√§s mer ‚Üí</a>
                                        </div>
                                    </div>
                                    <div class="col-md-6" id="newsSlide2">
                                        <div class="news-item">
                                            <div class="news-title">Energy sector rallies on supply concerns</div>
                                            <div class="news-source">Bloomberg ‚Ä¢ 4h ago</div>
                                            <a href="https://bloomberg.com" target="_blank" class="news-link" data-lang="readMore">L√§s mer ‚Üí</a>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="news-item">
                                            <div class="news-title">Healthcare stocks gain amid merger talks</div>
                                            <div class="news-source">Reuters ‚Ä¢ 5h ago</div>
                                            <a href="https://reuters.com" target="_blank" class="news-link" data-lang="readMore">L√§s mer ‚Üí</a>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="news-item">
                                            <div class="news-title">Market reaches new highs on strong earnings</div>
                                            <div class="news-source">CNBC ‚Ä¢ 6h ago</div>
                                            <a href="https://cnbc.com" target="_blank" class="news-link" data-lang="readMore">L√§s mer ‚Üí</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Hero Header End -->
    </div>
    <!-- Navbar End -->

    <!-- Stock Search Section Start -->
    <div class="container-fluid py-5" id="home">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-lg-12">
                    <div class="card stock-search-card p-4">
                        <div class="text-center mb-4">
                            <h5 class="section-title text-center text-primary" data-lang="searchStocks">S√∂k Aktier</h5>
                            <h2 class="mb-3" data-lang="searchTitle">H√§mta Aktuellt Pris & Historik</h2>
                            <p class="text-muted" data-lang="searchDesc">S√∂k efter USA-aktier och f√• aktuellt pris + interaktiv graf automatiskt</p>
                        </div>

                        <div class="row g-3">
                            <div class="col-lg-8 col-md-7">
                                <input 
                                    type="text" 
                                    id="searchInput" 
                                    class="form-control search-input" 
                                    placeholder="Ange ticker (t.ex. AAPL, TSLA, MSFT, GOOGL...)"
                                    style="text-transform: uppercase;"
                                >
                            </div>
                            <div class="col-lg-4 col-md-5">
                                <button class="btn btn-primary w-100 py-3" onclick="searchStock()">
                                    <i class="fas fa-search me-2"></i><span data-lang="btnSearch">S√∂k Aktie</span>
                                </button>
                            </div>
                        </div>

                        <div class="alert alert-info mt-3 mb-0" style="background: rgba(0, 208, 132, 0.15); border: 1px solid rgba(0, 208, 132, 0.3); color: #E0E0E0;">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>Tips:</strong> <span data-lang="apiTips">Anv√§nder Alpha Vantage API f√∂r realtidsdata. Max 25 s√∂kningar/dag med gratis API.</span>
                        </div>

                        <!-- Stock Result -->
                        <div id="stockResult" class="stock-result">
                            <!-- Result will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Stock Search Section End -->

    <!-- Calculator Section Start -->
    <div class="container-fluid py-5" id="calculator" style="background: rgba(13, 31, 45, 0.5);">
        <div class="container py-5">
            <div class="text-center mb-5">
                <h5 class="section-title text-center text-primary" data-lang="calculator">Kalkylator</h5>
                <h2 class="mb-3" data-lang="calcTitle">Ber√§kna Stop Loss & Take Profit</h2>
                <p class="text-muted" data-lang="calcDesc">Fyll i dina v√§rden och f√• exakta niv√•er f√∂r dina orders</p>
            </div>

            <div class="row g-5">
                <div class="col-lg-6">
                    <div class="card p-4">
                        <h4 class="mb-4"><i class="fas fa-edit text-primary me-2"></i><span data-lang="fillDetails">Fyll i Uppgifter</span></h4>
                        
                        <div class="mb-3">
                            <label for="buyPrice" class="form-label" data-lang="buyPrice">Ink√∂pspris (kr)</label>
                            <input type="number" class="form-control search-input" id="buyPrice" step="0.01" placeholder="100.00">
                            <small class="text-muted" data-lang="buyPriceHelp">Pris per aktie/certifikat</small>
                        </div>

                        <div class="mb-3">
                            <label for="quantity" class="form-label" data-lang="quantity">Antal aktier/certifikat</label>
                            <input type="number" class="form-control search-input" id="quantity" placeholder="100">
                            <small class="text-muted" data-lang="quantityHelp">Totalt antal som ska k√∂pas</small>
                        </div>

                        <div class="mb-4">
                            <label class="form-label" data-lang="selectRisk">V√§lj Riskniv√•</label>
                            <div class="row g-2">
                                <div class="col-6 col-md-4">
                                    <div class="risk-option active" onclick="selectRisk(1)">
                                        <div class="risk-label" data-lang="riskLow">L√•g</div>
                                        <div class="risk-value">1%</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="risk-option" onclick="selectRisk(2)">
                                        <div class="risk-label" data-lang="riskModerate">M√•ttlig</div>
                                        <div class="risk-value">2%</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="risk-option" onclick="selectRisk(3)">
                                        <div class="risk-label" data-lang="riskMedium">Medium</div>
                                        <div class="risk-value">3%</div>
                                    </div>
                                </div>
                                <div class="col-6 col-md-6">
                                    <div class="risk-option" onclick="selectRisk(4)">
                                        <div class="risk-label" data-lang="riskHigh">H√∂g</div>
                                        <div class="risk-value">4%</div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="risk-option" onclick="selectRisk(5)">
                                        <div class="risk-label" data-lang="riskVeryHigh">Mycket H√∂g</div>
                                        <div class="risk-value">5%</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button class="btn btn-primary w-100 py-3" onclick="calculate()">
                            <i class="fas fa-calculator me-2"></i><span data-lang="btnCalculate">Ber√§kna Niv√•er</span>
                        </button>
                    </div>
                </div>

                <div class="col-lg-6">
                    <!-- Parallax Flipping Calendar Card -->
                    <div class="card p-4 mb-4">
                        <h4 class="mb-3"><i class="fas fa-calendar-alt text-primary me-2"></i><span data-lang="sectorCalendar">Sektor Kalender</span></h4>
                        <div class="calendar-container">
                            <div class="calendar-card" id="calendarCard">
                                <div class="calendar-front">
                                    <div class="contentfront">
                                        <div class="calendar-month">
                                            <table>
                                                <tr class="orangeTr">
                                                    <th>M</th>
                                                    <th>T</th>
                                                    <th>W</th>
                                                    <th>T</th>
                                                    <th>F</th>
                                                    <th>S</th>
                                                    <th>S</th>
                                                </tr>
                                                <tr class="whiteTr">
                                                    <th></th>
                                                    <th>1</th>
                                                    <th>2</th>
                                                    <th>3</th>
                                                    <th>4</th>
                                                    <th>5</th>
                                                    <th>6</th>
                                                </tr>
                                                <tr class="whiteTr">
                                                    <th>7</th>
                                                    <th>8</th>
                                                    <th>9</th>
                                                    <th>10</th>
                                                    <th>11</th>
                                                    <th>12</th>
                                                    <th>13</th>
                                                </tr>
                                                <tr class="whiteTr">
                                                    <th>14</th>
                                                    <th>15</th>
                                                    <th>16</th>
                                                    <th>17</th>
                                                    <th>18</th>
                                                    <th>19</th>
                                                    <th>20</th>
                                                </tr>
                                                <tr class="whiteTr">
                                                    <th>21</th>
                                                    <th>22</th>
                                                    <th>23</th>
                                                    <th>24</th>
                                                    <th>25</th>
                                                    <th>26</th>
                                                    <th>27</th>
                                                </tr>
                                                <tr class="whiteTr">
                                                    <th>28</th>
                                                    <th>29</th>
                                                    <th>30</th>
                                                    <th>31</th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                </tr>
                                            </table>
                                        </div>
                                        <div class="calendar-date">
                                            <div class="calendar-date-content">
                                                <div id="cal-date">3</div>
                                                <div id="cal-day">Friday</div>
                                                <div id="cal-month">Jan/2026</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="calendar-back">
                                    <div class="contentback">
                                        <div class="backcontainer">
                                            <h6 style="color: #ECECE7; margin-bottom: 12px; font-size: 12px; text-align: center;">üìä AKTIVA SEKTORER</h6>
                                            <div class="sector-item-back">
                                                <span class="sector-name-back" data-lang="technology">Teknologi</span>
                                                <span class="sector-status-back strong" data-lang="strong">STARK</span>
                                            </div>
                                            <div class="sector-item-back">
                                                <span class="sector-name-back" data-lang="energy">Energi</span>
                                                <span class="sector-status-back strong" data-lang="strong">STARK</span>
                                            </div>
                                            <div class="sector-item-back">
                                                <span class="sector-name-back" data-lang="healthcare">H√§lsov√•rd</span>
                                                <span class="sector-status-back neutral" data-lang="neutral">NEUTRAL</span>
                                            </div>
                                            <div class="sector-item-back">
                                                <span class="sector-name-back" data-lang="finance">Finans</span>
                                                <span class="sector-status-back weak" data-lang="weak">SVAG</span>
                                            </div>
                                            <div class="sector-item-back">
                                                <span class="sector-name-back" data-lang="consumer">Konsument</span>
                                                <span class="sector-status-back neutral" data-lang="neutral">NEUTRAL</span>
                                            </div>
                                            <div class="sector-item-back">
                                                <span class="sector-name-back" data-lang="industrials">Industri</span>
                                                <span class="sector-status-back strong" data-lang="strong">STARK</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="text-center mt-2 mb-0" style="font-size: 11px; color: #B0B0B0;">Klicka f√∂r att visa sektorer</p>
                    </div>

                    <!-- Top Gainers Card -->
                    <div class="gainers-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5 class="mb-0"><i class="fas fa-chart-line text-primary me-2"></i><span data-lang="topGainers">Top Gainers</span></h5>
                            <button class="btn btn-sm btn-primary" onclick="loadTopGainers()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        <div id="topGainersList">
                            <div class="text-center py-3">
                                <div class="spinner-border-custom" style="width: 30px; height: 30px;"></div>
                                <p class="mt-2 text-muted" style="font-size: 13px;" data-lang="loadingGainers">Loading top gainers...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Row -->
            <div class="row g-5 mt-1">
                <div class="col-lg-12">
                    <!-- Results Card -->
                    <div id="results" class="results-card">
                        <h4 class="mb-4"><i class="fas fa-chart-bar text-primary me-2"></i><span data-lang="calculatedLevels">Ber√§knade Niv√•er</span></h4>
                        
                        <div class="row g-3">
                            <div class="col-md-6 col-lg-3">
                                <div class="result-item">
                                    <div class="result-label" data-lang="totalInvestment">Total Investering</div>
                                    <div class="result-value" id="totalInvestment">0 kr</div>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-3">
                                <div class="result-item">
                                    <div class="result-label" data-lang="riskReward">Risk/Reward</div>
                                    <div class="result-value" id="ratio">1:0</div>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-3">
                                <div class="result-item">
                                    <div class="result-label" data-lang="slTrigger">SL Trigger</div>
                                    <div class="result-value negative" id="slTrigger">0 kr</div>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-3">
                                <div class="result-item">
                                    <div class="result-label" data-lang="slLimit">SL Limit</div>
                                    <div class="result-value negative" id="slLimit">0 kr</div>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-3">
                                <div class="result-item">
                                    <div class="result-label" data-lang="maxLoss">Max F√∂rlust</div>
                                    <div class="result-value negative" id="maxLoss">0 kr</div>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-3">
                                <div class="result-item">
                                    <div class="result-label" data-lang="tpLimit">TP Limit</div>
                                    <div class="result-value positive" id="tpLimit">0 kr</div>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-3">
                                <div class="result-item">
                                    <div class="result-label" data-lang="maxProfit">Max Vinst</div>
                                    <div class="result-value positive" id="maxProfit">0 kr</div>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-3">
                                <div class="result-item">
                                    <div class="result-label">Chart</div>
                                    <div class="result-value">üìä</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Calculator Section End -->

    <!-- Guides Section Start -->
    <div class="container-fluid py-5" id="guides">
        <div class="container py-5">
            <div class="text-center mb-5">
                <h5 class="section-title text-center text-primary" data-lang="guides">Guider</h5>
                <h2 class="mb-3" data-lang="guidesTitle">Steg-f√∂r-steg Instruktioner</h2>
                <p class="text-muted" data-lang="guidesDesc">F√∂lj dessa enkla steg f√∂r att s√§tta dina orders p√• Avanza</p>
            </div>

            <ul class="nav nav-pills mb-4 justify-content-center" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="pills-sl-tab" data-bs-toggle="pill" data-bs-target="#pills-sl" type="button">
                        <i class="fas fa-shield-alt me-2"></i><span data-lang="tabStopLoss">Stop Loss</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-tp-tab" data-bs-toggle="pill" data-bs-target="#pills-tp" type="button">
                        <i class="fas fa-bullseye me-2"></i><span data-lang="tabTakeProfit">Take Profit</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-combined-tab" data-bs-toggle="pill" data-bs-target="#pills-combined" type="button">
                        <i class="fas fa-check-double me-2"></i><span data-lang="tabCombined">Kombinerad</span>
                    </button>
                </li>
            </ul>

            <div class="tab-content" id="pills-tabContent">
                <!-- Stop Loss Guide -->
                <div class="tab-pane fade show active" id="pills-sl">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <div class="guide-card">
                                <h4 class="text-primary mb-4"><i class="fas fa-list-ol me-2"></i>S√§tt Stop Loss Order</h4>
                                
                                <div class="guide-step">
                                    <strong>Steg 1:</strong> V√§lj ordertyp: <span class="guide-value">Stop Loss</span>
                                </div>
                                <div class="guide-step">
                                    <strong>Steg 2:</strong> Trigger-kurs: <span class="guide-value" id="guide-sl-trigger">0 kr</span>
                                </div>
                                <div class="guide-step">
                                    <strong>Steg 3:</strong> Limit-kurs: <span class="guide-value" id="guide-sl-limit">0 kr</span>
                                </div>
                                <div class="guide-step">
                                    <strong>Steg 4:</strong> Antal: <span class="guide-value" id="guide-sl-quantity">0 st</span>
                                </div>
                                <div class="guide-step">
                                    <strong>Steg 5:</strong> Giltighetstid: <span class="guide-value">Tills vidare</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Take Profit Guide -->
                <div class="tab-pane fade" id="pills-tp">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <div class="guide-card">
                                <h4 class="text-primary mb-4"><i class="fas fa-list-ol me-2"></i>S√§tt Take Profit Order</h4>
                                
                                <div class="guide-step">
                                    <strong>Steg 1:</strong> V√§lj ordertyp: <span class="guide-value">Limit</span>
                                </div>
                                <div class="guide-step">
                                    <strong>Steg 2:</strong> Limit-kurs: <span class="guide-value" id="guide-tp-limit">0 kr</span>
                                </div>
                                <div class="guide-step">
                                    <strong>Steg 3:</strong> Antal: <span class="guide-value" id="guide-tp-quantity">0 st</span>
                                </div>
                                <div class="guide-step">
                                    <strong>Steg 4:</strong> Giltighetstid: <span class="guide-value">Tills vidare</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Combined Guide -->
                <div class="tab-pane fade" id="pills-combined">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            <div class="guide-card">
                                <h4 class="text-primary mb-4"><i class="fas fa-list-ol me-2"></i>K√∂p + S√§tt B√•da Orders</h4>
                                
                                <h5 class="mt-4 mb-3">Del 1: K√∂p Aktien</h5>
                                <div class="guide-step">
                                    Ordertyp: <span class="guide-value">Market/Limit</span>
                                </div>
                                <div class="guide-step">
                                    Pris: <span class="guide-value" id="guide-buy-price">0 kr</span>
                                </div>
                                <div class="guide-step">
                                    Antal: <span class="guide-value" id="guide-buy-quantity">0 st</span>
                                </div>

                                <h5 class="mt-4 mb-3">Del 2: S√§tt Stop Loss</h5>
                                <div class="guide-step">
                                    Trigger: <span class="guide-value" id="guide-buy-sl-trigger">0 kr</span>
                                </div>
                                <div class="guide-step">
                                    Limit: <span class="guide-value" id="guide-buy-sl-limit">0 kr</span>
                                </div>

                                <h5 class="mt-4 mb-3">Del 3: S√§tt Take Profit</h5>
                                <div class="guide-step">
                                    Limit: <span class="guide-value" id="guide-buy-tp-limit">0 kr</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Guides Section End -->

    <!-- Footer Start -->
    <div class="container-fluid footer py-5 wow fadeIn" data-wow-delay="0.2s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-md-6 col-lg-4">
                    <div class="footer-item">
                        <a href="index.html" class="p-0">
                            <h4 class="text-white"><i class="fas fa-chart-line me-3"></i>SetMyTrade</h4>
                        </a>
                        <p class="text-white-50 mb-4">Professional Stop Loss & Take Profit calculator for serious traders. 100% free tool.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="footer-item">
                        <h4 class="text-white mb-4">Snabbl√§nkar</h4>
                        <a href="#home" class="btn btn-link">Hem</a>
                        <a href="#calculator" class="btn btn-link">Kalkylator</a>
                        <a href="#guides" class="btn btn-link">Guider</a>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <div class="footer-item">
                        <h4 class="text-white mb-4">Information</h4>
                        <p class="text-white-50"><i class="fas fa-shield-alt text-primary me-2"></i>100% Gratis Verktyg</p>
                        <p class="text-white-50"><i class="fas fa-calculator text-primary me-2"></i>Exakta Ber√§kningar</p>
                        <p class="text-white-50"><i class="fas fa-chart-line text-primary me-2"></i>Realtidsdata fr√•n Alpha Vantage</p>
                        <button class="btn btn-primary mt-3" onclick="openFeedbackModal()">
                            <i class="fas fa-comment-alt me-2"></i><span data-lang="sendFeedback">Skicka Feedback</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->

    <!-- Copyright Start -->
    <div class="container-fluid copyright py-4">
        <div class="container">
            <div class="row g-4 align-items-center">
                <div class="col-md-6 text-center text-md-start mb-md-0">
                    <span class="text-body"><i class="fas fa-copyright text-light me-2"></i>SetMyTrade 2026. All rights reserved.</span>
                </div>
                <div class="col-md-6 text-center text-md-end text-body">
                    Built with ‚ù§Ô∏è for traders worldwide
                </div>
            </div>
        </div>
    </div>
    <!-- Copyright End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-primary btn-lg-square rounded-circle back-to-top"><i class="fa fa-arrow-up"></i></a>

    <!-- Feedback Modal -->
    <div id="feedbackModal" class="feedback-modal">
        <div class="feedback-content">
            <button class="feedback-close" onclick="closeFeedbackModal()">&times;</button>
            <h3 class="text-white mb-4"><i class="fas fa-comment-alt text-primary me-2"></i><span data-lang="feedbackTitle">Skicka Feedback</span></h3>
            <form action="https://formsubmit.co/refaa.moe@gmail.com" method="POST">
                <input type="hidden" name="_subject" value="New feedback from SetMyTrade">
                <input type="hidden" name="_captcha" value="false">
                <input type="hidden" name="_next" value="https://setmytrade.xyz">
                
                <div class="mb-3">
                    <label class="form-label" data-lang="feedbackName">Namn (valfritt)</label>
                    <input type="text" name="namn" class="form-control search-input" placeholder="Ditt namn">
                </div>
                
                <div class="mb-3">
                    <label class="form-label" data-lang="feedbackEmail">E-post (valfritt)</label>
                    <input type="email" name="email" class="form-control search-input" placeholder="din@email.com">
                </div>
                
                <div class="mb-3">
                    <label class="form-label" data-lang="feedbackMessage">Feedback *</label>
                    <textarea name="feedback" class="form-control search-input" rows="5" placeholder="Skriv din feedback h√§r..." required></textarea>
                </div>
                
                <button type="submit" class="btn btn-primary w-100 py-3">
                    <i class="fas fa-paper-plane me-2"></i><span data-lang="btnSendFeedback">Skicka Feedback</span>
                </button>
            </form>
            <p class="text-muted text-center mt-3 mb-0" style="font-size: 12px;">
                <i class="fas fa-lock me-1"></i><span data-lang="feedbackPrivacy">Din feedback skickas s√§kert via FormSubmit.co</span>
            </p>
        </div>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // ============================================
        // CONFIGURATION & DATA
        // ============================================
        
        let currentStock = null;
        let calculatedData = null;
        let selectedRisk = 1;
        let currentChart = null;
        let chartPeriod = '30';
        let currentLanguage = 'sv'; // Default Swedish
        
        const riskLevels = {
            1: { stopLoss: 0.01, takeProfit: 0.02 },
            2: { stopLoss: 0.02, takeProfit: 0.04 },
            3: { stopLoss: 0.03, takeProfit: 0.06 },
            4: { stopLoss: 0.04, takeProfit: 0.08 },
            5: { stopLoss: 0.05, takeProfit: 0.10 }
        };
        
        // ============================================
        // TRANSLATIONS
        // ============================================
        
        const translations = {
            sv: {
                // Topbar
                calcSlTp: "Ber√§kna SL/TP",
                professionalTool: "Professionell Trading Kalkylator",
                freeTool: "100% Gratis Verktyg",
                
                // Header/Hero
                welcomeTitle: "V√§lkommen till SetMyTrade",
                heroHeadline: "Maximera Din Avkastning med Smart Riskhantering",
                heroDescription: "Ber√§kna exakta Stop Loss och Take Profit niv√•er f√∂r dina trades. Professionellt verktyg f√∂r seri√∂sa traders.",
                btnStartCalc: "B√∂rja Ber√§kna",
                btnReadGuides: "L√§s Guider",
                
                // Stock Search
                searchStocks: "S√∂k Aktier",
                searchTitle: "H√§mta Aktuellt Pris & Historik",
                searchDesc: "S√∂k efter USA-aktier och f√• aktuellt pris + interaktiv graf automatiskt",
                searchPlaceholder: "Ange ticker (t.ex. AAPL, TSLA, MSFT, GOOGL...)",
                btnSearch: "S√∂k Aktie",
                apiTips: "Anv√§nder Alpha Vantage API f√∂r realtidsdata. Max 25 s√∂kningar/dag med gratis API.",
                
                // Calculator
                calculator: "Kalkylator",
                calcTitle: "Ber√§kna Stop Loss & Take Profit",
                calcDesc: "Fyll i dina v√§rden och f√• exakta niv√•er f√∂r dina orders",
                fillDetails: "Fyll i Uppgifter",
                buyPrice: "Ink√∂pspris (kr)",
                buyPriceHelp: "Pris per aktie/certifikat",
                quantity: "Antal aktier/certifikat",
                quantityHelp: "Totalt antal som ska k√∂pas",
                selectRisk: "V√§lj Riskniv√•",
                riskLow: "L√•g",
                riskModerate: "M√•ttlig",
                riskMedium: "Medium",
                riskHigh: "H√∂g",
                riskVeryHigh: "Mycket H√∂g",
                btnCalculate: "Ber√§kna Niv√•er",
                
                // Results
                calculatedLevels: "Ber√§knade Niv√•er",
                totalInvestment: "Total Investering",
                riskReward: "Risk/Reward",
                slTrigger: "SL Trigger",
                slLimit: "SL Limit",
                maxLoss: "Max F√∂rlust",
                tpLimit: "TP Limit",
                maxProfit: "Max Vinst",
                
                // Guides
                guides: "Guider",
                guidesTitle: "Steg-f√∂r-steg Instruktioner",
                guidesDesc: "F√∂lj dessa enkla steg f√∂r att s√§tta dina orders hos din m√§klare",
                tabStopLoss: "Stop Loss",
                tabTakeProfit: "Take Profit",
                tabCombined: "Kombinerad",
                
                // Stop Loss Guide
                guideSlTitle: "S√§tt Stop Loss Order",
                guideSlStep1: "V√§lj ordertyp:",
                guideSlStep2: "Trigger-kurs:",
                guideSlStep3: "Limit-kurs:",
                guideSlStep4: "Antal:",
                guideSlStep5: "Giltighetstid:",
                guideSlValue5: "Tills vidare",
                
                // Take Profit Guide
                guideTpTitle: "S√§tt Take Profit Order",
                guideTpStep1: "V√§lj ordertyp:",
                guideTpStep2: "Limit-kurs:",
                guideTpStep3: "Antal:",
                guideTpStep4: "Giltighetstid:",
                
                // Combined Guide
                guideCombTitle: "K√∂p + S√§tt B√•da Orders",
                guideCombPart1: "Del 1: K√∂p Aktien",
                guideCombOrderType: "Ordertyp:",
                guideCombPrice: "Pris:",
                guideCombQuantity: "Antal:",
                guideCombPart2: "Del 2: S√§tt Stop Loss",
                guideCombTrigger: "Trigger:",
                guideCombLimit: "Limit:",
                guideCombPart3: "Del 3: S√§tt Take Profit",
                
                // Footer
                footerDesc: "Professionell Stop Loss & Take Profit kalkylator f√∂r seri√∂sa investerare. 100% gratis verktyg.",
                quickLinks: "Snabbl√§nkar",
                home: "Hem",
                information: "Information",
                freeTool2: "100% Gratis Verktyg",
                exactCalc: "Exakta Ber√§kningar",
                realtimeData: "Realtidsdata fr√•n Alpha Vantage",
                copyright: "Avanza Trading Helper 2026. Alla r√§ttigheter f√∂rbeh√•llna.",
                builtWith: "Byggd med ‚ù§Ô∏è f√∂r svenska investerare",
                
                // Stock Result
                btnUsePrice: "Anv√§nd pris",
                inCalculator: "i kalkylatorn",
                
                // Alerts & Messages
                enterTicker: "Skriv in en ticker-symbol!",
                fillPriceQty: "Fyll i Ink√∂pspris och Antal!",
                loading: "H√§mtar aktuellt pris och historik...",
                tickerNotFound: "Ticker hittades inte. Kontrollera stavningen.",
                apiLimit: "API-gr√§ns n√•dd (25 requests/dag). V√§nta och f√∂rs√∂k igen.",
                noData: "Ingen data hittades f√∂r",
                errorTips: "Kontrollera att ticker-symbolen √§r korrekt",
                tryUsaStocks: "Prova med USA-aktier: AAPL, TSLA, MSFT, GOOGL",
                apiLimitInfo: "Gratis API: max 25 s√∂kningar/dag",
                fillManually: "Eller fyll i pris manuellt nedan",
                btnFillManually: "Fyll i pris manuellt",
                
                // Calendar & Top Gainers
                calendar: "Kalender",
                topGainers: "St√∂rsta Vinnare",
                loadingGainers: "Laddar st√∂rsta vinnare...",
                
                // Sector Calendar
                sectorCalendar: "Sektor Kalender",
                activeSectors: "Aktiva Sektorer Idag",
                sectorPerformance: "Marknads√∂versikt",
                sectorSubtitle: "Dagens starkaste sektorer",
                technology: "Teknologi",
                healthcare: "H√§lsov√•rd",
                finance: "Finans",
                energy: "Energi",
                consumer: "Konsument",
                industrials: "Industri",
                strong: "STARK",
                weak: "SVAG",
                neutral: "NEUTRAL",
                
                // News
                latestNews: "Senaste Nyheterna",
                marketNews: "Marknadsnyheter",
                newsSubtitle: "Senaste uppdateringarna",
                readMore: "L√§s mer",
                
                // Feedback
                sendFeedback: "Skicka Feedback",
                feedbackTitle: "Skicka Feedback",
                feedbackName: "Namn (valfritt)",
                feedbackEmail: "E-post (valfritt)",
                feedbackMessage: "Feedback *",
                btnSendFeedback: "Skicka Feedback",
                feedbackPrivacy: "Din feedback skickas s√§kert via FormSubmit.co"
            },
            en: {
                // Topbar
                calcSlTp: "Calculate SL/TP",
                professionalTool: "Professional Trading Calculator",
                freeTool: "100% Free Tool",
                
                // Header/Hero
                welcomeTitle: "Welcome to SetMyTrade",
                heroHeadline: "Maximize Your Returns with Smart Risk Management",
                heroDescription: "Calculate exact Stop Loss and Take Profit levels for your trades. Professional tool for serious traders.",
                btnStartCalc: "Start Calculating",
                btnReadGuides: "Read Guides",
                
                // Stock Search
                searchStocks: "Search Stocks",
                searchTitle: "Get Current Price & History",
                searchDesc: "Search for US stocks and get current price + interactive chart automatically",
                searchPlaceholder: "Enter ticker (e.g. AAPL, TSLA, MSFT, GOOGL...)",
                btnSearch: "Search Stock",
                apiTips: "Uses Alpha Vantage API for real-time data. Max 25 searches/day with free API.",
                
                // Calculator
                calculator: "Calculator",
                calcTitle: "Calculate Stop Loss & Take Profit",
                calcDesc: "Fill in your values and get exact levels for your orders",
                fillDetails: "Fill in Details",
                buyPrice: "Purchase Price (kr)",
                buyPriceHelp: "Price per share/certificate",
                quantity: "Number of shares/certificates",
                quantityHelp: "Total number to purchase",
                selectRisk: "Select Risk Level",
                riskLow: "Low",
                riskModerate: "Moderate",
                riskMedium: "Medium",
                riskHigh: "High",
                riskVeryHigh: "Very High",
                btnCalculate: "Calculate Levels",
                
                // Results
                calculatedLevels: "Calculated Levels",
                totalInvestment: "Total Investment",
                riskReward: "Risk/Reward",
                slTrigger: "SL Trigger",
                slLimit: "SL Limit",
                maxLoss: "Max Loss",
                tpLimit: "TP Limit",
                maxProfit: "Max Profit",
                
                // Guides
                guides: "Guides",
                guidesTitle: "Step-by-step Instructions",
                guidesDesc: "Follow these simple steps to set your orders with your broker",
                tabStopLoss: "Stop Loss",
                tabTakeProfit: "Take Profit",
                tabCombined: "Combined",
                
                // Stop Loss Guide
                guideSlTitle: "Set Stop Loss Order",
                guideSlStep1: "Select order type:",
                guideSlStep2: "Trigger price:",
                guideSlStep3: "Limit price:",
                guideSlStep4: "Quantity:",
                guideSlStep5: "Validity:",
                guideSlValue5: "Until cancelled",
                
                // Take Profit Guide
                guideTpTitle: "Set Take Profit Order",
                guideTpStep1: "Select order type:",
                guideTpStep2: "Limit price:",
                guideTpStep3: "Quantity:",
                guideTpStep4: "Validity:",
                
                // Combined Guide
                guideCombTitle: "Buy + Set Both Orders",
                guideCombPart1: "Part 1: Buy the Stock",
                guideCombOrderType: "Order type:",
                guideCombPrice: "Price:",
                guideCombQuantity: "Quantity:",
                guideCombPart2: "Part 2: Set Stop Loss",
                guideCombTrigger: "Trigger:",
                guideCombLimit: "Limit:",
                guideCombPart3: "Part 3: Set Take Profit",
                
                // Footer
                footerDesc: "Professional Stop Loss & Take Profit calculator for serious investors. 100% free tool.",
                quickLinks: "Quick Links",
                home: "Home",
                information: "Information",
                freeTool2: "100% Free Tool",
                exactCalc: "Exact Calculations",
                realtimeData: "Real-time data from Alpha Vantage",
                copyright: "Avanza Trading Helper 2026. All rights reserved.",
                builtWith: "Built with ‚ù§Ô∏è for Swedish investors",
                
                // Stock Result
                btnUsePrice: "Use price",
                inCalculator: "in calculator",
                
                // Alerts & Messages
                enterTicker: "Enter a ticker symbol!",
                fillPriceQty: "Fill in Purchase Price and Quantity!",
                loading: "Fetching current price and history...",
                tickerNotFound: "Ticker not found. Check spelling.",
                apiLimit: "API limit reached (25 requests/day). Wait and try again.",
                noData: "No data found for",
                errorTips: "Check that the ticker symbol is correct",
                tryUsaStocks: "Try US stocks: AAPL, TSLA, MSFT, GOOGL",
                apiLimitInfo: "Free API: max 25 searches/day",
                fillManually: "Or fill in price manually below",
                btnFillManually: "Fill in price manually",
                
                // Calendar & Top Gainers
                calendar: "Calendar",
                topGainers: "Top Gainers",
                loadingGainers: "Loading top gainers...",
                
                // Sector Calendar
                sectorCalendar: "Sector Calendar",
                activeSectors: "Active Sectors Today",
                sectorPerformance: "Market Overview",
                sectorSubtitle: "Today's strongest sectors",
                technology: "Technology",
                healthcare: "Healthcare",
                finance: "Finance",
                energy: "Energy",
                consumer: "Consumer",
                industrials: "Industrials",
                strong: "STRONG",
                weak: "WEAK",
                neutral: "NEUTRAL",
                
                // News
                latestNews: "Latest News",
                marketNews: "Market News",
                newsSubtitle: "Latest updates",
                readMore: "Read more",
                
                // Feedback
                sendFeedback: "Send Feedback",
                feedbackTitle: "Send Feedback",
                feedbackName: "Name (optional)",
                feedbackEmail: "Email (optional)",
                feedbackMessage: "Feedback *",
                btnSendFeedback: "Send Feedback",
                feedbackPrivacy: "Your feedback is sent securely via FormSubmit.co"
            }
        };
        
        // ============================================
        // LANGUAGE SYSTEM
        // ============================================
        
        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('language', lang);
            
            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // Translate all elements with data-lang attribute
            document.querySelectorAll('[data-lang]').forEach(element => {
                const key = element.getAttribute('data-lang');
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            
            // Update placeholders
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.placeholder = translations[lang].searchPlaceholder;
            }
            
            // Update calendar language
            updateCalendarDate();
            
            // Update news language
            updateNewsLanguage();
        }
        
        // Load saved language on page load
        function initLanguage() {
            const savedLang = localStorage.getItem('language') || 'sv';
            currentLanguage = savedLang;
            
            // Set active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const activeBtn = savedLang === 'sv' ? document.querySelector('.lang-btn:first-child') : document.querySelector('.lang-btn:last-child');
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
            
            // Apply translations if not Swedish (default)
            if (savedLang !== 'sv') {
                setTimeout(() => {
                    document.querySelectorAll('[data-lang]').forEach(element => {
                        const key = element.getAttribute('data-lang');
                        if (translations[savedLang][key]) {
                            element.textContent = translations[savedLang][key];
                        }
                    });
                    
                    const searchInput = document.getElementById('searchInput');
                    if (searchInput) {
                        searchInput.placeholder = translations[savedLang].searchPlaceholder;
                    }
                }, 100);
            }
        }
        
        // ============================================
        // SPINNER
        // ============================================
        
        window.addEventListener('load', function() {
            const spinner = document.getElementById('spinner');
            if (spinner) {
                spinner.classList.remove('show');
            }
            
            // Initialize language
            initLanguage();
            
            // Initialize calendar
            initCalendar();
            
            // Start hero slider
            startHeroSlider();
            
            // Update news based on language
            updateNewsLanguage();
            
            // Load top gainers
            loadTopGainers();
        });
        
        // ============================================
        // BACK TO TOP
        // ============================================
        
        const backToTop = document.querySelector('.back-to-top');
        
        window.addEventListener('scroll', function() {
            if (window.scrollY > 300) {
                backToTop.style.display = 'flex';
            } else {
                backToTop.style.display = 'none';
            }
        });
        
        backToTop.addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // ============================================
        // STOCK SEARCH
        // ============================================
        
        async function searchStock() {
            const query = document.getElementById('searchInput').value.trim().toUpperCase();
            
            if (!query) {
                alert(translations[currentLanguage].enterTicker);
                return;
            }
            
            const apiKey = 'LHBGOUL4ZLHCV9PW';
            const loadingDiv = document.getElementById('stockResult');
            
            loadingDiv.innerHTML = `<div class="loading-spinner"><div class="spinner-border-custom"></div><p class="mt-3">${translations[currentLanguage].loading}</p></div>`;
            loadingDiv.classList.add('show');
            
            try {
                // Fetch current price
                const quoteUrl = `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${encodeURIComponent(query)}&apikey=${apiKey}`;
                const proxyUrl = 'https://api.allorigins.win/raw?url=';
                
                const quoteResponse = await fetch(proxyUrl + encodeURIComponent(quoteUrl));
                const quoteData = await quoteResponse.json();
                
                if (quoteData['Error Message']) {
                    throw new Error(translations[currentLanguage].tickerNotFound);
                }
                
                if (quoteData['Note'] || quoteData['Information']) {
                    throw new Error(translations[currentLanguage].apiLimit);
                }
                
                const quote = quoteData['Global Quote'];
                
                if (!quote || !quote['05. price']) {
                    throw new Error(translations[currentLanguage].noData + ' ' + query);
                }
                
                currentStock = {
                    ticker: quote['01. symbol'] || query,
                    price: parseFloat(quote['05. price']),
                    change: parseFloat(quote['09. change']),
                    changePercent: parseFloat(quote['10. change percent'].replace('%', ''))
                };
                
                // Fetch historical data for chart
                await fetchStockChart(query, apiKey);
                
                displayStockResult();
                
            } catch (error) {
                console.error('API error:', error);
                loadingDiv.innerHTML = `
                    <div class="loading-spinner">
                        <p class="text-danger fw-bold">${error.message}</p>
                        <div class="alert alert-warning mt-3 text-start">
                            <strong>Tips:</strong>
                            <ul class="mb-0 mt-2">
                                <li>${translations[currentLanguage].errorTips}</li>
                                <li>${translations[currentLanguage].tryUsaStocks}</li>
                                <li>${translations[currentLanguage].apiLimitInfo}</li>
                                <li>${translations[currentLanguage].fillManually}</li>
                            </ul>
                        </div>
                        <button class="btn btn-primary mt-3" onclick="document.getElementById('buyPrice').scrollIntoView({behavior: 'smooth'}); document.getElementById('stockResult').classList.remove('show');">
                            ${translations[currentLanguage].btnFillManually}
                        </button>
                    </div>
                `;
            }
        }
        
        // ============================================
        // FETCH STOCK CHART DATA
        // ============================================
        
        async function fetchStockChart(symbol, apiKey) {
            try {
                const chartUrl = `https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${encodeURIComponent(symbol)}&apikey=${apiKey}&outputsize=compact`;
                const proxyUrl = 'https://api.allorigins.win/raw?url=';
                
                const response = await fetch(proxyUrl + encodeURIComponent(chartUrl));
                const data = await response.json();
                
                if (data['Time Series (Daily)']) {
                    const timeSeries = data['Time Series (Daily)'];
                    const dates = Object.keys(timeSeries).reverse().slice(-parseInt(chartPeriod));
                    const prices = dates.map(date => parseFloat(timeSeries[date]['4. close']));
                    
                    currentStock.chartData = {
                        dates: dates,
                        prices: prices
                    };
                }
            } catch (error) {
                console.error('Chart fetch error:', error);
            }
        }
        
        // ============================================
        // DISPLAY STOCK RESULT WITH CHART
        // ============================================
        
        function displayStockResult() {
            const s = currentStock;
            const changeColor = s.change >= 0 ? 'positive' : 'negative';
            const changeSign = s.change >= 0 ? '+' : '';
            
            let chartHTML = '';
            if (s.chartData) {
                chartHTML = `
                    <div class="text-center mb-3">
                        <button class="period-btn ${chartPeriod === '7' ? 'active' : ''} me-2" onclick="changeChartPeriod('7')">7D</button>
                        <button class="period-btn ${chartPeriod === '30' ? 'active' : ''} me-2" onclick="changeChartPeriod('30')">30D</button>
                        <button class="period-btn ${chartPeriod === '90' ? 'active' : ''}" onclick="changeChartPeriod('90')">90D</button>
                    </div>
                    <div class="chart-container">
                        <canvas id="stockChart"></canvas>
                    </div>
                `;
            }
            
            const html = `
                <div class="row align-items-center mb-4">
                    <div class="col-md-4 text-center text-md-start">
                        <div class="stock-ticker">${s.ticker}</div>
                    </div>
                    <div class="col-md-4 text-center">
                        <div class="stock-price">$${s.price.toFixed(2)}</div>
                    </div>
                    <div class="col-md-4 text-center text-md-end">
                        <div class="stock-change ${changeColor}">
                            ${changeSign}${s.change.toFixed(2)} (${changeSign}${s.changePercent.toFixed(2)}%)
                        </div>
                    </div>
                </div>
                ${chartHTML}
                <button class="btn btn-primary w-100 mt-3" onclick="useStockPrice()">
                    <i class="fas fa-check-circle me-2"></i>${translations[currentLanguage].btnUsePrice} $${s.price.toFixed(2)} ${translations[currentLanguage].inCalculator}
                </button>
            `;
            
            document.getElementById('stockResult').innerHTML = html;
            document.getElementById('stockResult').classList.add('show');
            
            if (s.chartData) {
                setTimeout(() => renderChart(), 100);
            }
        }
        
        // ============================================
        // RENDER CHART
        // ============================================
        
        function renderChart() {
            const canvas = document.getElementById('stockChart');
            if (!canvas || !currentStock.chartData) return;
            
            const ctx = canvas.getContext('2d');
            
            if (currentChart) {
                currentChart.destroy();
            }
            
            currentChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: currentStock.chartData.dates,
                    datasets: [{
                        label: currentStock.ticker + ' Pris',
                        data: currentStock.chartData.prices,
                        borderColor: '#00D084',
                        backgroundColor: 'rgba(0, 208, 132, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 6,
                        pointHoverBackgroundColor: '#00D084',
                        pointHoverBorderColor: '#FFFFFF',
                        pointHoverBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(13, 31, 45, 0.95)',
                            titleColor: '#FFFFFF',
                            bodyColor: '#00D084',
                            borderColor: '#00D084',
                            borderWidth: 1,
                            padding: 12,
                            displayColors: false,
                            callbacks: {
                                label: function(context) {
                                    return '$' + context.parsed.y.toFixed(2);
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#B0B0B0',
                                maxTicksLimit: 8
                            }
                        },
                        y: {
                            display: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#B0B0B0',
                                callback: function(value) {
                                    return '$' + value.toFixed(2);
                                }
                            }
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            });
        }
        
        // ============================================
        // CHANGE CHART PERIOD
        // ============================================
        
        async function changeChartPeriod(period) {
            chartPeriod = period;
            
            if (currentStock && currentStock.ticker) {
                const apiKey = 'LHBGOUL4ZLHCV9PW';
                await fetchStockChart(currentStock.ticker, apiKey);
                displayStockResult();
            }
        }
        
        // ============================================
        // USE STOCK PRICE
        // ============================================
        
        function useStockPrice() {
            if (currentStock) {
                document.getElementById('buyPrice').value = currentStock.price.toFixed(2);
                document.getElementById('buyPrice').scrollIntoView({ behavior: 'smooth' });
                
                // Visual feedback
                const input = document.getElementById('buyPrice');
                input.style.borderColor = '#00D084';
                input.style.boxShadow = '0 0 0 0.2rem rgba(0, 208, 132, 0.25)';
                setTimeout(() => {
                    input.style.borderColor = '';
                    input.style.boxShadow = '';
                }, 1500);
            }
        }
        
        // ============================================
        // RISK SELECTOR
        // ============================================
        
        function selectRisk(level) {
            selectedRisk = level;
            
            document.querySelectorAll('.risk-option').forEach(option => {
                option.classList.remove('active');
            });
            
            event.currentTarget.classList.add('active');
        }
        
        // ============================================
        // CALCULATE
        // ============================================
        
        function calculate() {
            const buyPrice = parseFloat(document.getElementById('buyPrice').value);
            const quantity = parseInt(document.getElementById('quantity').value);
            
            if (!buyPrice || !quantity) {
                alert(translations[currentLanguage].fillPriceQty);
                return;
            }
            
            const risk = riskLevels[selectedRisk];
            const totalInvestment = buyPrice * quantity;
            
            const slTrigger = buyPrice * (1 - risk.stopLoss);
            const slLimit = slTrigger * 0.98;
            const maxLoss = totalInvestment * risk.stopLoss;
            
            const tpLimit = buyPrice * (1 + risk.takeProfit);
            const maxProfit = totalInvestment * risk.takeProfit;
            
            const ratio = (maxProfit / maxLoss).toFixed(2);
            
            calculatedData = {
                buyPrice,
                quantity,
                totalInvestment,
                slTrigger,
                slLimit,
                maxLoss,
                tpLimit,
                maxProfit,
                ratio
            };
            
            updateDisplays();
            
            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }
        
        // ============================================
        // UPDATE DISPLAYS
        // ============================================
        
        function updateDisplays() {
            const d = calculatedData;
            
            document.getElementById('totalInvestment').textContent = d.totalInvestment.toFixed(2) + ' kr';
            document.getElementById('slTrigger').textContent = d.slTrigger.toFixed(2) + ' kr';
            document.getElementById('slLimit').textContent = d.slLimit.toFixed(2) + ' kr';
            document.getElementById('maxLoss').textContent = '-' + d.maxLoss.toFixed(2) + ' kr';
            document.getElementById('tpLimit').textContent = d.tpLimit.toFixed(2) + ' kr';
            document.getElementById('maxProfit').textContent = '+' + d.maxProfit.toFixed(2) + ' kr';
            document.getElementById('ratio').textContent = '1:' + d.ratio;
            
            document.getElementById('guide-sl-trigger').textContent = d.slTrigger.toFixed(2) + ' kr';
            document.getElementById('guide-sl-limit').textContent = d.slLimit.toFixed(2) + ' kr';
            document.getElementById('guide-sl-quantity').textContent = d.quantity + ' st';
            
            document.getElementById('guide-tp-limit').textContent = d.tpLimit.toFixed(2) + ' kr';
            document.getElementById('guide-tp-quantity').textContent = d.quantity + ' st';
            
            document.getElementById('guide-buy-quantity').textContent = d.quantity + ' st';
            document.getElementById('guide-buy-price').textContent = d.buyPrice.toFixed(2) + ' kr';
            document.getElementById('guide-buy-sl-trigger').textContent = d.slTrigger.toFixed(2) + ' kr';
            document.getElementById('guide-buy-sl-limit').textContent = d.slLimit.toFixed(2) + ' kr';
            document.getElementById('guide-buy-tp-limit').textContent = d.tpLimit.toFixed(2) + ' kr';
        }
        
        // ============================================
        // ENTER KEY SUPPORT
        // ============================================
        
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchStock();
            }
        });
        
        // ============================================
        // CALENDAR FUNCTIONS
        // ============================================
        
        function initCalendar() {
            const calendarCard = document.getElementById('calendarCard');
            if (calendarCard) {
                calendarCard.addEventListener('click', function() {
                    this.classList.toggle('flipped');
                });
            }
            
            updateCalendarDate();
        }
        
        function updateCalendarDate() {
            const weekday = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
            const weekdaySv = ["S√∂ndag", "M√•ndag", "Tisdag", "Onsdag", "Torsdag", "Fredag", "L√∂rdag"];
            const month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            const monthSv = ["Januari", "Februari", "Mars", "April", "Maj", "Juni", "Juli", "Augusti", "September", "Oktober", "November", "December"];
            
            const today = new Date();
            const d = today.getDate();
            const y = today.getFullYear();
            const wd = currentLanguage === 'sv' ? weekdaySv[today.getDay()] : weekday[today.getDay()];
            const mt = currentLanguage === 'sv' ? monthSv[today.getMonth()] : month[today.getMonth()];
            
            document.getElementById('cal-date').textContent = d;
            document.getElementById('cal-day').textContent = wd;
            document.getElementById('cal-month').textContent = mt + "/" + y;
        }
        
        // ============================================
        // HERO SLIDER
        // ============================================
        
        let currentHeroSlide = 1;
        
        function startHeroSlider() {
            setInterval(() => {
                const slides = document.querySelectorAll('.hero-slide');
                slides.forEach(slide => slide.classList.remove('active'));
                
                currentHeroSlide++;
                if (currentHeroSlide > 3) currentHeroSlide = 1;
                
                document.getElementById('heroSlide' + currentHeroSlide).classList.add('active');
            }, 7000); // Change slide every 7 seconds
        }
        
        // ============================================
        // FEEDBACK MODAL
        // ============================================
        
        function openFeedbackModal() {
            document.getElementById('feedbackModal').classList.add('show');
        }
        
        function closeFeedbackModal() {
            document.getElementById('feedbackModal').classList.remove('show');
        }
        
        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('feedbackModal');
            if (event.target === modal) {
                closeFeedbackModal();
            }
        });
        
        // ============================================
        // NEWS UPDATES BY LANGUAGE
        // ============================================
        
        function updateNewsLanguage() {
            if (currentLanguage === 'sv') {
                // Swedish news sources
                document.getElementById('newsSlide1').innerHTML = `
                    <div class="news-item">
                        <div class="news-title">Teknikaktier stiger kraftigt p√• AI-investeringar</div>
                        <div class="news-source">Avanza ‚Ä¢ 2h sedan</div>
                        <a href="https://www.avanza.se" target="_blank" class="news-link">L√§s mer ‚Üí</a>
                    </div>
                `;
                document.getElementById('newsSlide2').innerHTML = `
                    <div class="news-item">
                        <div class="news-title">Energisektorn rasar p√• f√∂rs√∂rjningsproblem</div>
                        <div class="news-source">Dagens Industri ‚Ä¢ 4h sedan</div>
                        <a href="https://www.di.se" target="_blank" class="news-link">L√§s mer ‚Üí</a>
                    </div>
                `;
            } else {
                // English news sources
                document.getElementById('newsSlide1').innerHTML = `
                    <div class="news-item">
                        <div class="news-title">Tech stocks surge as AI investments accelerate</div>
                        <div class="news-source">Yahoo Finance ‚Ä¢ 2h ago</div>
                        <a href="https://finance.yahoo.com" target="_blank" class="news-link">Read more ‚Üí</a>
                    </div>
                `;
                document.getElementById('newsSlide2').innerHTML = `
                    <div class="news-item">
                        <div class="news-title">Energy sector rallies on supply concerns</div>
                        <div class="news-source">Bloomberg ‚Ä¢ 4h ago</div>
                        <a href="https://bloomberg.com" target="_blank" class="news-link">Read more ‚Üí</a>
                    </div>
                `;
            }
        }
        
        // ============================================
        // TOP GAINERS API
        // ============================================
        
        async function loadTopGainers() {
            const listDiv = document.getElementById('topGainersList');
            
            listDiv.innerHTML = `
                <div class="text-center py-3">
                    <div class="spinner-border-custom" style="width: 30px; height: 30px;"></div>
                    <p class="mt-2 text-muted" style="font-size: 13px;">${translations[currentLanguage].loadingGainers || 'Loading top gainers...'}</p>
                </div>
            `;
            
            try {
                const apiKey = 'LHBGOUL4ZLHCV9PW';
                const url = `https://www.alphavantage.co/query?function=TOP_GAINERS_LOSERS&apikey=${apiKey}`;
                const proxyUrl = 'https://api.allorigins.win/raw?url=';
                
                const response = await fetch(proxyUrl + encodeURIComponent(url));
                const data = await response.json();
                
                if (data['top_gainers']) {
                    displayTopGainers(data['top_gainers'].slice(0, 10));
                } else {
                    throw new Error('No data available');
                }
            } catch (error) {
                console.error('Top Gainers error:', error);
                listDiv.innerHTML = `
                    <div class="text-center py-3">
                        <p class="text-danger" style="font-size: 13px;">Failed to load gainers</p>
                        <button class="btn btn-sm btn-primary mt-2" onclick="loadTopGainers()">
                            <i class="fas fa-sync-alt me-1"></i>Retry
                        </button>
                    </div>
                `;
            }
        }
        
        function displayTopGainers(gainers) {
            const listDiv = document.getElementById('topGainersList');
            
            let html = '';
            gainers.forEach((gainer, index) => {
                const ticker = gainer.ticker;
                const price = parseFloat(gainer.price).toFixed(2);
                const changePercent = parseFloat(gainer.change_percentage.replace('%', '')).toFixed(2);
                
                html += `
                    <div class="gainer-item">
                        <div class="gainer-info">
                            <div class="gainer-ticker">${index + 1}. ${ticker}</div>
                            <div class="gainer-price">$${price}</div>
                        </div>
                        <div class="gainer-change">+${changePercent}%</div>
                    </div>
                `;
            });
            
            listDiv.innerHTML = html;
        }
    </script>
</body>
</html>
